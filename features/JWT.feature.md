---
exampleContext:
  fingerprint: 92b.y7i24q
  deviceId: ed468852-a96d-4d88-9447-252730c396c2
  publicDeviceId: outfling-swanherd-attaghan
  API: "https://api.nordicsemi.world/2024-04-15"
---

# Acquiring a JWT for use with the hello.nrfcloud.com backend API

> The device history is stored by the hello.nrfcloud.com backend but should only
> be accessible for devices, that are currently shared. Therefore a JWT can be
> generated by the nrfcloud.com/map backend that confirms that the device is
> shared and this JWT is then presented to the nrfcloud.com backend when
> retrieving the history.

## Background

Given I have the device id for a shared `thingy91x` device in `deviceId` and the
public device id in `publicDeviceId`

## Retrieve the JWT

When I `GET` to `${API}/device/${publicDeviceId}/jwt`

Then I should receive a `https://github.com/hello-nrfcloud/proto-map/device-jwt`
response

And I store `jwt` of the last response into `jwt`

Then the JWT in `jwt` for the audience `hello.nrfcloud.com` should encode the
payload

```json
{
  "id": "${publicDeviceId}",
  "deviceId": "${deviceId}",
  "model": "thingy91x"
}
```
